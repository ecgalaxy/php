---
- name: Install APT requirements
  ansible.builtin.package:
    name:
      - dirmngr
    state: present
  become: true

- name: Enable APT repositories
  ansible.builtin.apt_repository:
    repo: "{{ item }}"
    state: present
  become: true
  loop: "{{ php_enabled_apt_repos }}"

- name: Install APT PHP packages
  ansible.builtin.apt:
    name: "{{ php_installed_packages + php_installed_packages_extra }}"
    state: present
    install_recommends: false
  become: true
